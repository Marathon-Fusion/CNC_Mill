; Move to Machine XY position 
; Created by Cohen Weston on August 22, 2025
; Modified by Cohen Weston on August 25, 2025

M400

var xCur = move.axes[0].machinePosition
var yCur = move.axes[1].machinePosition

var xMin = move.axes[0].min
var xMax = move.axes[0].max
var yMin = move.axes[1].min
var yMax = move.axes[1].max

M291 P"Move to MACHINE XY position (relative to TOP LEFT CORNER OF VICE)?" S3 J2
if result == -1
  abort "Move cancelled"


else
  ; X
  M291 R"Target X" P{"Enter X (mm). Default = current<br>Allowed values: " ^ {var.xMin} ^  " to " ^ {var.xMax}} S6 F{var.xCur} L{var.xMin} H{var.xMax} J2
  if result == -1
    abort "Move cancelled"
  var xT = input
  ; Y
  M291 R"Target Y" P{"Enter Y (mm). Default = current<br>Allowed values: " ^ {var.yMin} ^  " to " ^ {var.yMax}} S6 F{var.yCur} L{var.yMin} H{var.yMax} J2
  if result == -1
    abort "Move cancelled"
  var yT = input

  ; Feedrate (mm/min)
  M291 R"Feedrate" P"Enter F in mm/min" S5 F3000 L1 J2
  if result == -1
    abort "Move cancelled"
  var feed = input

  G94
  G53 G1 X{var.xT} Y{var.yT} F{var.feed}
